"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[465],{1548:function(e,t,a){var l=a(9049);const r="http://123.57.109.30:3999",o=l.Z.create({baseURL:r,timeout:1e3});t.Z=o},8143:function(e,t,a){a.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",[[t("div",[t("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"card-header"},[t("span",[e._v(e._s(e.title))]),t("div",{staticClass:"extra"},[e._t("extra")],2)])]},proxy:!0}],null,!0)},[e._t("default")],2)],1)]],2)},r=[],o={props:{title:{type:String,default:"标题"}}},s=o,i=a(4249),n=(0,i.Z)(s,l,r,!1,null,"26483a25",null),c=n.exports},7154:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=function(){var e=this,t=e._self._c;return t("div",[t("Headercomponer",{attrs:{title:"搜索查询"}},[t("div",{attrs:{slot:"extra"},slot:"extra"}),t("div",[t("el-form",{attrs:{model:e.formModel,inline:!0}},[t("el-form-item",{attrs:{label:"需要条数"}},[t("el-select",{attrs:{placeholder:"需要条数"},model:{value:e.formModel.everyNum,callback:function(t){e.$set(e.formModel,"everyNum",t)},expression:"formModel.everyNum"}},[t("el-option",{attrs:{label:"30",value:"30"}}),t("el-option",{attrs:{label:"50",value:"50"}}),t("el-option",{attrs:{label:"100",value:"100"}}),t("el-option",{attrs:{label:"200",value:"200"}})],1)],1),t("el-form-item",{attrs:{label:"搜索关键字"}},[t("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入搜索内容",clearable:""},on:{select:e.handleSelect},model:{value:e.formModel.searchText,callback:function(t){e.$set(e.formModel,"searchText",t)},expression:"formModel.searchText"}})],1),t("el-form-item",{attrs:{label:"排序"}},[t("el-select",{attrs:{placeholder:"排序方式"},model:{value:e.formModel.how,callback:function(t){e.$set(e.formModel,"how",t)},expression:"formModel.how"}},[t("el-option",{attrs:{label:"价格",value:"price"}}),t("el-option",{attrs:{label:"评论数",value:"eval"}})],1)],1),t("el-form-item",[t("el-select",{attrs:{placeholder:"升降序"},model:{value:e.formModel.asc,callback:function(t){e.$set(e.formModel,"asc",t)},expression:"formModel.asc"}},[t("el-option",{attrs:{label:"升序",value:"asc"}}),t("el-option",{attrs:{label:"降序",value:"desc"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.getSearchList}},[e._v("筛选")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.pageData,"max-height":"880px"}},[t("el-table-column",{attrs:{label:"商品ID",prop:"goodsId",width:"320"}}),t("el-table-column",{attrs:{label:"商品图片",prop:"",width:"400"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("div",{staticClass:"goods-img"},[t("img",{ref:"imgRef",attrs:{src:a.imageUrl},on:{error:function(t){return e.onError(a)}}})])]}}])}),t("el-table-column",{attrs:{label:"商品名称",prop:"goodsName"}}),t("el-table-column",{attrs:{label:"商品价格",prop:"",width:"220"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v("￥"+e._s(t.goodsPrice.toFixed(2)))]}}])}),t("el-table-column",{attrs:{label:"商品数量",prop:"evalNum",width:"180"}})],1),t("el-pagination",{attrs:{background:"","current-page":e.formModel.page,"page-size":30,layout:"prev, pager, next, total",total:e.searchList.length},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.formModel,"page",t)},"update:current-page":function(t){return e.$set(e.formModel,"page",t)}}})],1)])],1)},r=[],o=a.p+"img/A6XaeFUerS.66b2457c.jpg",s=a(1548);const i=()=>s.Z.get("/api/hotSearchList"),n=e=>s.Z.get("/api/searchGoodsList",{params:e});var c=a(8143),u={data(){return{loading:!1,formModel:{searchText:"",page:"1",everyNum:"30",how:"price",asc:"asc"},suggeList:[],searchList:[],page:1,defaultPic:o}},methods:{async getSearchList(){this.loading=!0;const{data:{list:e}}=await n(this.formModel);this.searchList=e.data,this.loading=!1},querySearch(e,t){t(this.suggeList)},handleSelect(e){},onError(e){this.searchList.forEach((t=>{t.goodsId===e.goodsId&&(t.imageUrl=this.defaultPic)}))},handleCurrentChange(e){this.page=e,this.getSearchList()}},async created(){this.$store.commit("tag/selecMenu",{path:this.$route.path,label:"搜索查询"}),this.getSearchList();const{data:{list:e}}=await i();e.forEach((e=>{this.suggeList.unshift({value:e.searchText})}))},computed:{pageData(){const e=30*(this.page-1),t=e+30;return this.searchList.slice(e,t)}},components:{Headercomponer:c.Z}},d=u,p=a(4249),h=(0,p.Z)(d,l,r,!1,null,"a795c7ca",null),m=h.exports}}]);
//# sourceMappingURL=465.a6c43248.js.map