"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[341],{8143:function(o,t,e){e.d(t,{Z:function(){return r}});var s=function(){var o=this,t=o._self._c;return t("div",[[t("div",[t("el-card",{staticClass:"box-card",scopedSlots:o._u([{key:"header",fn:function(){return[t("div",{staticClass:"card-header"},[t("span",[o._v(o._s(o.title))]),t("div",{staticClass:"extra"},[o._t("extra")],2)])]},proxy:!0}],null,!0)},[o._t("default")],2)],1)]],2)},i=[],l={props:{title:{type:String,default:"标题"}}},a=l,d=e(4249),n=(0,d.Z)(a,s,i,!1,null,"26483a25",null),r=n.exports},2341:function(o,t,e){e.r(t),e.d(t,{default:function(){return g}});var s=function(){var o=this,t=o._self._c;return t("div",[t("Headercomponer",{attrs:{title:"商品管理"}},[t("div",{attrs:{slot:"extra"},slot:"extra"}),t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:o.goodsList}},[t("el-table-column",{attrs:{prop:"goods_id",label:"商品ID",width:"200"}}),t("el-table-column",{attrs:{prop:"",label:"商品图",width:"180px"},scopedSlots:o._u([{key:"default",fn:function({row:o}){return[t("div",{staticClass:"img-box"},[t("img",{attrs:{src:o.goods.goods_image,alt:""}})])]}}])}),t("el-table-column",{attrs:{prop:"goods.goods_name",label:"商品名称",width:"auto"}}),t("el-table-column",{attrs:{prop:"goods_num",label:"商品数量",width:"180"}}),t("el-table-column",{attrs:{prop:"",label:"商品价格",width:"auto"},scopedSlots:o._u([{key:"default",fn:function({row:e}){return[t("p",{staticClass:"price-min"},[o._v("￥"+o._s(e.goods.goods_price_min))]),t("span",{staticClass:"price-max"},[o._v("￥"+o._s(e.goods.goods_price_max))])]}}])}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"auto"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},scopedSlots:o._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){return o.handleEdit(e.row)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return o.handleDelt(e.row)}}})]}}])})],1)],1),t("el-dialog",{attrs:{title:"提示",visible:o.dialogVisible,width:"30%"},on:{"update:visible":function(t){o.dialogVisible=t}}},[t("el-form",{attrs:{model:o.formModel,"label-width":"80px",inline:!0}},[t("el-form-item",{attrs:{label:"商品ID"}},[t("el-input",{attrs:{disabled:""},model:{value:o.formModel.goods_id,callback:function(t){o.$set(o.formModel,"goods_id",t)},expression:"formModel.goods_id"}})],1),t("el-form-item",{attrs:{label:"商品图片"}},[t("div",{staticClass:"img-box"},[t("img",{attrs:{src:o.formModel.goods_img,alt:""}})])]),t("el-form-item",{attrs:{label:"商品名称"}},[t("el-input",{attrs:{disabled:""},model:{value:o.formModel.goods_name,callback:function(t){o.$set(o.formModel,"goods_name",t)},expression:"formModel.goods_name"}})],1),t("el-form-item",{attrs:{label:"商品数量"}},[t("div",{staticClass:"goods-num"},[t("el-button",{attrs:{type:"primary"},on:{click:o.onSub}},[o._v("-")]),t("el-input",{staticClass:"input",attrs:{type:"number"},on:{input:o.changeNum},model:{value:o.formModel.goods_num,callback:function(t){o.$set(o.formModel,"goods_num",t)},expression:"formModel.goods_num"}}),t("el-button",{attrs:{type:"primary"},on:{click:function(t){o.formModel.goods_num+=1}}},[o._v("+")])],1)]),t("el-form-item",{attrs:{label:"商品价格"}},[t("el-input",{attrs:{disabled:""},model:{value:o.formModel.goods_price,callback:function(t){o.$set(o.formModel,"goods_price",t)},expression:"formModel.goods_price"}})],1),t("el-form-item",{attrs:{label:"创建时间"}},[t("el-input",{attrs:{disabled:""},model:{value:o.formModel.goods_time,callback:function(t){o.$set(o.formModel,"goods_time",t)},expression:"formModel.goods_time"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){o.dialogVisible=!1}}},[o._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:o.onSubmit}},[o._v("确 定")])],1)],1)],1)],1)},i=[],l=e(505),a=e.n(l),d=e(9997),n=e(8143),r={data(){return{loading:!1,dialogVisible:!1,goodsList:[],formModel:{goods_id:"",goods_img:"",goods_name:"",goods_num:1,goods_price:"",goods_time:""}}},methods:{async getDoodsList(){this.loading=!0;const{data:{list:o}}=await(0,d.od)();this.goodsList=o.reverse(),this.loading=!1},handleEdit(o){this.formModel={goods_id:o.goods_id,goods_img:o.goods.goods_image,goods_name:o.goods.goods_name,goods_num:o.goods_num,goods_price:o.goods.goods_price_min,goods_time:o.create_time,goods_sku_id:o.goods_sku_id},this.dialogVisible=!0},async onSubmit(){if(""===this.formModel.goods_num)return a().error("商品数量不可为空");const{goods_id:o,goods_num:t,goods_sku_id:e}=this.formModel;await(0,d.K9)(o,t,e);a().success("编辑成功"),this.getDoodsList(),this.dialogVisible=!1},handleDelt(o){this.$confirm("此操作将永久删除该商品, 是否继续?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const t=[];t.push(o.id);const e=await(0,d.nq)(t);console.log(e),this.getDoodsList(),a()({type:"success",message:"删除成功!"})})).catch((()=>{a()({type:"info",message:"已取消删除"})}))},onSub(){this.formModel.goods_num<=1||(this.formModel.goods_num-=1)},changeNum(o){this.formModel.goods_num=o}},created(){this.$store.commit("tag/selecMenu",{path:this.$route.path,label:"商品管理"}),this.getDoodsList()},components:{Headercomponer:n.Z}},c=r,m=e(4249),u=(0,m.Z)(c,s,i,!1,null,"d5f8e520",null),g=u.exports}}]);
//# sourceMappingURL=341.08d289f1.js.map