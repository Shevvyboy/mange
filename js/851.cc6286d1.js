"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[851],{8143:function(e,t,a){a.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[[t("div",[t("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"card-header"},[t("span",[e._v(e._s(e.title))]),t("div",{staticClass:"extra"},[e._t("extra")],2)])]},proxy:!0}],null,!0)},[e._t("default")],2)],1)]],2)},l=[],r={props:{title:{type:String,default:"标题"}}},o=r,i=a(4249),n=(0,i.Z)(o,s,l,!1,null,"26483a25",null),c=n.exports},4851:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=function(){var e=this,t=e._self._c;return t("div",[t("Headercomponer",{attrs:{title:"个人中心"}},[t("div",{attrs:{slot:"extra"},slot:"extra"}),t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-card",{staticClass:"item-card"},[t("p",[e._v("用户信息")]),t("el-form",[t("el-form-item",{attrs:{label:"登录名"}},[t("el-input",{attrs:{disabled:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1),t("el-form-item",{attrs:{label:"电子邮箱"}},[t("el-input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.updateUser}},[e._v("修改信息")])],1)],1)],1),t("el-card",{staticClass:"item-card"},[t("p",[e._v("重置密码")]),t("el-form",[t("el-form-item",{attrs:{label:"旧密码"}},[t("el-input",{model:{value:e.pwdForm.old_pwd,callback:function(t){e.$set(e.pwdForm,"old_pwd",t)},expression:"pwdForm.old_pwd"}})],1),t("el-form-item",{attrs:{label:"新密码"}},[t("el-input",{model:{value:e.pwdForm.new_pwd,callback:function(t){e.$set(e.pwdForm,"new_pwd",t)},expression:"pwdForm.new_pwd"}})],1),t("el-form-item",{attrs:{label:"确认新密码"}},[t("el-input",{model:{value:e.pwdForm.re_pwd,callback:function(t){e.$set(e.pwdForm,"re_pwd",t)},expression:"pwdForm.re_pwd"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success"},on:{click:e.updatePassword}},[e._v("修改密码")]),t("el-button",{attrs:{type:"info"}},[e._v("重置")])],1)],1)],1)],1),t("el-col",{attrs:{span:16}},[t("el-card",{staticClass:"item-card"},[t("p",[e._v("修改头像")]),t("el-upload",{ref:"uploadRef",staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"on-change":e.onSelectFile,"show-file-list":!1}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"item-button"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){e.$refs.uploadRef.$el.querySelector("input").click()}}},[e._v("选择头像")]),t("el-button",{attrs:{disabled:e.isDisabled,type:"success",icon:"el-icon-upload2"},on:{click:e.updateAvatar}},[e._v("上传头像")])],1)],1)],1)],1)],1)])],1)},l=[],r=a(505),o=a.n(r),i=a(5279),n=a(1035),c=a(8143),u={data(){return{isDisabled:!0,imageUrl:"",userInfo:{},pwdForm:{old_pwd:"",new_pwd:"",re_pwd:""}}},methods:{onSelectFile(e){const t=new FileReader;t.readAsDataURL(e.raw),t.onload=()=>{this.imageUrl=t.result,this.isDisabled=!1}},async updateAvatar(){await(0,n.gg)(this.imageUrl),o().success("上传头像成功")},async updateUser(){await(0,n.gS)(this.userInfo),o().success("更新成功")},async updatePassword(){await(0,n.RX)(this.pwdForm);o().success("修改成功"),(0,i.Ne)(),this.$router.replace("/login")}},async created(){this.$store.commit("tag/selecMenu",{path:this.$route.path,label:"个人中心"});const{data:e}=await(0,n.bG)();this.userInfo=e,this.imageUrl=e.user_pic},components:{Headercomponer:c.Z}},d=u,p=a(4249),m=(0,p.Z)(d,s,l,!1,null,"32e932d6",null),f=m.exports}}]);
//# sourceMappingURL=851.cc6286d1.js.map